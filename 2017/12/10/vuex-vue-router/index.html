<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> vuex+vue-router · CDBlog</title><meta name="description" content="vuex+vue-router - chendong"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="CDBlog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">vuex+vue-router</h1><div class="post-info">Dec 10, 2017</div><div class="post-content"><h3 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h3><h4 id="routes"><a href="#routes" class="headerlink" title="routes"></a>routes</h4><ol>
<li>利用vue懒加载和webpack的代码分割，可以按需加载router组件，有效优化。<br><code>resolve =&gt; require([&#39;../components/main&#39;], resolve)</code></li>
<li>component 一个组件，对应 <strong>name=’default’</strong> 的 <code>router-view</code>，当然，未命名的router-view的默认name就是default， 所以有时候可以省略</li>
<li>components 是组件对象， key对应不同的视图名</li>
</ol>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import Router from &apos;vue-router&apos;</span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line">var routes = [</span><br><span class="line">&#123;</span><br><span class="line">    path: &apos;/&apos;,</span><br><span class="line">    component: resolve =&gt; require([&apos;../components/main&apos;], resolve),</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    path: &apos;/head&apos;,</span><br><span class="line">    components:&#123;</span><br><span class="line">        default: resolve =&gt; require([&apos;../components/head&apos;], resolve),</span><br><span class="line">        header: resolve =&gt; require([&apos;../components/header&apos;], resolve),</span><br><span class="line">        footer: resolve =&gt; require([&apos;../components/footer&apos;], resolve)      </span><br><span class="line">    &#125;,</span><br><span class="line">    children: [</span><br><span class="line">    &#123;</span><br><span class="line">        path: &apos;child1&apos;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            default: resolve =&gt; require([&apos;../components/child1&apos;], resolve)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: &apos;child2&apos;,</span><br><span class="line">        component: resolve =&gt; require([&apos;../components/child2&apos;], resolve)</span><br><span class="line">    &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">    path: &apos;/foot&apos;,</span><br><span class="line">    components:&#123;</span><br><span class="line">        default: resolve =&gt; require([&apos;../components/foot&apos;], resolve),</span><br><span class="line">        header: resolve =&gt; require([&apos;../components/header&apos;], resolve),</span><br><span class="line">        footer: resolve =&gt; require([&apos;../components/footer&apos;], resolve)      </span><br><span class="line">    &#125;  &#125;</span><br><span class="line"></span><br><span class="line">] </span><br><span class="line"></span><br><span class="line">export default new Router(&#123;</span><br><span class="line">    routes: routes,</span><br><span class="line">    linkActiveClass: &apos;route-active&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="beforeEach"><a href="#beforeEach" class="headerlink" title="beforeEach"></a>beforeEach</h4><p>常见的一种场景就是跳转路由的时候，判断是否处于登录状态，如果处于未登录状态，跳转到登录页。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach( (to, from, next) =&gt; &#123;</span><br><span class="line">    if ( !logined() )&#123;</span><br><span class="line">      next(&#123;path: &apos;/login&apos;&#125;);</span><br><span class="line">      return ;</span><br><span class="line">    &#125;</span><br><span class="line">    next();</span><br><span class="line">&#125;) ;</span><br></pre></td></tr></table></figure>
<h3 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h3><p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模， 类似于Redux。</p>
<ol>
<li>state state就是Vuex存储的状态及数据，</li>
<li>getters getters可以理解为计算属性<code>computed</code>， 可以直接返回经过处理后的state数据</li>
<li>mutation mutation是同步事件操作，直接变更state，通过 <code>store.commit</code> 提交事件</li>
<li>action action是异步操作，提交mutation，通过mutation变更state</li>
</ol>
<h3 id="directives"><a href="#directives" class="headerlink" title="directives"></a>directives</h3><p>directives 是指令，有5种指令钩子，可以以指令的形式赋予元素响应事件的功能。</p>
<p>bind：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。<br>inserted：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。<br>update：所在组件的 VNode 更新时调用，但是可能发生在其子 VNode 更新之前。指令的值可能发生了改变，也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新 (详细的钩子函数参数见下)。<br>componentUpdated：指令所在组件的 VNode 及其子 VNode 全部更新后调用。<br>unbind：只调用一次，指令与元素解绑时调用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-list-style&gt;item&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;    </span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  directives: &#123;</span><br><span class="line">      listStyle (ele) &#123;</span><br><span class="line">              ele.style.listStyle = &apos;none&apos;;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="props"><a href="#props" class="headerlink" title="props"></a>props</h3><p>组件的参数，由父组件向下传递。<br>在子组件中用props接收传递的参数， 可以用数组的形式， 更推荐在对象中列出props的类型，可以有效检查错误及增强可读性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 父组件调用， Boolean类型的border可以直接简写</span><br><span class="line">    &lt;Item :list=&quot;list&quot; :msg=&quot;msg&quot; border&gt;&lt;/Item&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  // props: [&apos;list&apos;, &apos;msg&apos;, &apos;border&apos;]</span><br><span class="line">  props: &#123;</span><br><span class="line">      list: &#123;</span><br><span class="line">        type: Array</span><br><span class="line">      &#125;,</span><br><span class="line">      msg :&#123;</span><br><span class="line">        type: String</span><br><span class="line">      &#125;,</span><br><span class="line">      border: &#123;</span><br><span class="line">          type: Boolean</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2018/01/01/axios/" class="prev">PREV</a><a href="/2017/12/03/select2自定义模板/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2018 <a href="http://yoursite.com">chendong</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>